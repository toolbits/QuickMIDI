#define				ZeroValue			(long)0#define				ZeroPointer			(long)0#define				ZeroHandle			(long)0#define				MainMenuID			128typedef enum MenuIndexEnum{	AppleID=128,	FileID,		MidiID,		WindowID} MenuIndexEnum;//GlobalRoutinesOSErr				SetupMenu			(void);void				ResetMenu			(void);void				MenuAction			(register long);//StaticRoutinesstatic	void		AppleMenuProc		(register MenuIndexEnum);static	void		FileMenuProc		(register MenuIndexEnum);static	void		MidiMenuProc		(register MenuIndexEnum);static	void		WindowMenuProc		(register MenuIndexEnum);//ExternRoutinesextern	void		SetApplicationQuit	(Boolean);extern	void		PreferenceDialog	(void);extern	CWindowPtr	GetMainWindow		(void);extern	void		ResetMidiDevice		(void);extern	void		ResetNotes			(void);extern	void		ResetControls		(void);extern	void		ResetInstruments	(void);//GlobalMemoriesBoolean				AboutMessageOn = false;Boolean				AutoAboutHide;OSErr SetupMenu(void){	register	Handle		MenuBar;	OSErr					Result;		Result = noErr;	if((MenuBar = GetNewMBar(MainMenuID)) != ZeroHandle){		SetMenuBar(MenuBar);		DisposeHandle(MenuBar);		AppendResMenu(GetMenuHandle(AppleID),'DRVR');		DrawMenuBar();	}	else Result = ResError();	return(Result);}/*SetupMenu*/void ResetMenu(void){	return;}/*ResetMenu*/void MenuAction(register long SelectedMenu){	short			MenuID;	short			ItemID;		MenuID = HiWord(SelectedMenu);	ItemID = LoWord(SelectedMenu);	switch(MenuID){		case AppleID:			AppleMenuProc(ItemID);			break;		case FileID:			FileMenuProc(ItemID);			break;		case MidiID:			MidiMenuProc(ItemID);			break;		case WindowID:			WindowMenuProc(ItemID);			break;		default:			break;	}	HiliteMenu(ZeroValue);	return;}/*MenuAction*/static void AppleMenuProc(register MenuIndexEnum ItemID){	Str255			AccName;	switch(ItemID){		case 1:			AboutMessageOn = true;			AutoAboutHide = !((WindowPeek)GetMainWindow())->visible;			ShowWindow((WindowPtr)GetMainWindow());			break;		default:			GetMenuItemText(GetMenuHandle(AppleID),ItemID,AccName);			OpenDeskAcc(AccName);			break;	}	return;}/*AppleMenuProc*/static void FileMenuProc(register MenuIndexEnum ItemID){	Str255			AccName;	switch(ItemID){		case 1:			PreferenceDialog();			break;		case 3:			SetApplicationQuit(true);			break;		default:			break;	}	return;}/*FileMenuProc*/static void MidiMenuProc(register MenuIndexEnum ItemID){	Str255			AccName;	switch(ItemID){		case 1:			ResetNotes();			break;		case 3:			ResetControls();			break;		case 4:			ResetInstruments();			break;		case 6:			ResetMidiDevice();			break;		default:			break;	}	return;}/*MidiMenuProc*/static void WindowMenuProc(register MenuIndexEnum ItemID){	Str255			AccName;	switch(ItemID){		case 1:			ShowWindow((WindowPtr)GetMainWindow());			break;		default:			break;	}	return;}/*WindowMenuProc*/